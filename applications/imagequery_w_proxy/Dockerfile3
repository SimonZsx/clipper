# docker build -f ./imagequery_w_proxy/Dockerfile3 -t imagequery_w_proxy:c3 .
# docker run -p 8000:8000 -it imagequery_w_proxy:c3

FROM ubuntu:bionic
RUN apt-get update && apt-get install python3 python3-pip -y

RUN pip3 install nltk
RUN python3 -m nltk.downloader all

RUN pip3 install grpcio
RUN pip3 install protobuf

ADD imagequery_w_proxy/c3_textPreprocessing/app /container/

ADD grpc/app/container_entry.sh /container/
ADD grpc/app/server.py /container/
ADD grpc/app/model_pb2_grpc.py /container/
ADD grpc/app/model_pb2.py /container/
ADD grpc/app/proxy_pb2_grpc.py /container/
ADD grpc/app/proxy_pb2.py /container/

# CMD ["/container/container_entry.sh", "c3", "/container/server.py"]
# CMD ["python3","/container/predict.py"]

EXPOSE 11000