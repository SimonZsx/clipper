FROM ubuntu:bionic
RUN apt-get update
RUN apt-get update
RUN apt-get install python3 python3-pip -y
RUN apt-get install libsm6 libxrender1 libfontconfig1 libxext-dev -y

# docker build -f ./mainDockerfile -t auto_pilot_main:raft .
# docker run -p 10000:10000 -it auto_pilot_main:raft
# docker run --runtime=nvidia -p 10000:10000 -it auto_pilot_main:raft

RUN pip3 install scipy
RUN pip3 install pillow
RUN pip3 install numpy
RUN pip3 install keras
RUN pip3 install tensorflow
RUN pip3 install opencv-contrib-python

ADD c0_Entry_Point /container/c0_Entry_Point
ADD c1_Image_Preprocessing /container/c1_Image_Preprocessing
ADD c2_Obstacle_Detection /container/c2_Obstacle_Detection
ADD c3_Route_Planning /container/c3_Route_Planning
ADD c4_Algo1 /container/c4_Algo1
ADD c5_Algo2 /container/c5_Algo2
ADD c6_Conclusion /container/c6_Conclusion
ADD dataset /container/dataset
ADD models /container/models
ADD main.py /container

CMD ["python3", "/container/main.py"]

EXPOSE 10000
